<div class="consulta-container" [class.loading]="isLoading">
    <nz-spin [nzSpinning]="isLoading" nzTip="Cargando..." nzSize="large">

        <!-- Vista 1: Formulario de BÃºsqueda -->
        <div *ngIf="!showResults && !showDetail">
            <app-busqueda-form (onSearch)="handleSearch($event)"></app-busqueda-form>
        </div>

        <!-- Vista 2: Tabla de Resultados -->
        <div *ngIf="showResults && !showDetail">
            <app-resultados-tabla [procesos]="procesos" (onSelectProceso)="handleSelectProceso($event)"
                (onNewSearch)="handleNewSearch()">
            </app-resultados-tabla>
        </div>

        <!-- Vista 3: Detalle del Proceso -->
        <div *ngIf="showDetail && procesoSeleccionado">
            <div class="detalle-header">
                <h3><i nz-icon nzType="file-text"></i> Detalle del Proceso</h3>
                <button nz-button (click)="handleNewSearch()" class="back-button">
                    <i nz-icon nzType="arrow-left"></i> Volver
                </button>
            </div>
            <app-detalle-proceso [proceso]="procesoSeleccionado"></app-detalle-proceso>
        </div>

    </nz-spin>
</div>